<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
HELLO
</body>
<canvas id="bar-chart" width="200" height="100" style="display: block; height: 200px; width: 400px;"></canvas>
<p id="location-table"></p>


<script>

    $(document).ready(function () {
        $.ajax({
            url: "http://localhost:3000/chart_data",
            method: "GET",
            success: function (response) {
                console.log(response);
                var chartdata = {
                    labels: response.labels,
                    datasets: [
                        {
                            label: 'Number of users by location',
                            backgroundColor: '#4499aa',
                            borderColor: 'green',
                            data: response.data
                        }
                    ]
                };

                var ctx = $("#bar-chart"); //document.getElementById("bar-chart')
                var bargraph = new Chart(ctx, {
                    type: 'line',
                    data: chartdata
                });
                var table = $("#location-table")
                $.each(response.result, function (i, item) {
                    console.log("ITEM" +  item)
                    table.append('<tr><td>' + item.country +" " +item.count + '</td></tr>');
                });
            },
            error: function (error) {
                console.log(error);
            }

        });
    });


</script>